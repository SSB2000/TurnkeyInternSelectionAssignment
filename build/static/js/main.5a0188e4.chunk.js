(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),u=t(15),o=t.n(u),a=t(6),i=t(3),s=t(0);function d(e){var n=e.person,t=e.handleDelete;return Object(s.jsxs)("li",{children:[n.name,": ",n.number,Object(s.jsx)("button",{type:"submit",onClick:function(){return t(n.id)},children:"Delete"})]})}function l(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:e.addPerson,children:[Object(s.jsx)("h2",{children:"Add new"}),Object(s.jsxs)("div",{children:["name:"," ",Object(s.jsx)("input",{type:"text",placeholder:"Enter your name..",value:e.newName,onChange:e.handleNameAddition}),Object(s.jsx)("br",{}),"number:"," ",Object(s.jsx)("input",{type:"tel",placeholder:"Enter your number..",value:e.newNumber,onChange:e.handleNumberAddition})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})}var b=t(4),j=t.n(b),h="/api/persons",f={getAll:function(){return j.a.get(h).then((function(e){return e.data}))},createPerson:function(e){return j.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(h,"/").concat(e))},updateNumber:function(e){return j.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e.data}))}};t(39);function m(e){var n=e.message,t=e.type;return Object(s.jsx)("div",{className:t,children:n})}var O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(c.useState)(""),o=Object(i.a)(u,2),b=o[0],j=o[1],h=Object(c.useState)(""),O=Object(i.a)(h,2),p=O[0],x=O[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),N=w[0],g=w[1],y=Object(c.useState)(""),k=Object(i.a)(y,2),A=k[0],P=k[1];Object(c.useEffect)((function(){f.getAll().then((function(e){return r(e)})).catch((function(e){console.log(e)}))}),[]);var S=function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&f.deletePerson(e).then((function(){r(t.filter((function(n){return n.id!==e})))})).then((function(){g("".concat(n.name," is deleted!")),P("success"),setTimeout((function(){g(null),P(null)}),4e3)})).catch((function(t){g("".concat(n.name," was already deleted!")),P("success"),setTimeout((function(){g(null),P(null)}),4e3),r(f.filter((function(n){return n.id!==e})))}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(m,{message:N,type:A}),Object(s.jsx)(l,{newName:b,handleNameAddition:function(e){var n=e.target.value;j(n)},newNumber:p,handleNumberAddition:function(e){x(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:b,number:p};if(t.find((function(e){return e.name===b}))){alert("".concat(b," already exists in the phonebook. Replace the old number with new one?"));var c=t.find((function(e){return e.name===b})),u=Object(a.a)(Object(a.a)({},c),{},{number:p});f.updateNumber(u).then((function(e){r(t.map((function(n){return n.name!==b?n:e})))})).catch((function(e){g("".concat(b," does not exists in the phonebook.")),P("error"),setTimeout((function(){g(null),P(null),j(""),x("")}),4e3)}))}else f.createPerson(n).then((function(e){r(t.concat(e))})).then((function(){g("".concat(b," is added!")),P("success"),setTimeout((function(){g(null),P(null)}),4e3)})),j(""),x("")}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsx)(d,{person:e,handleDelete:S},e.id)}))})]})};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5a0188e4.chunk.js.map